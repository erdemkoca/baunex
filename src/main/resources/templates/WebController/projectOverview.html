{#include layout}
  {#title}{#if project.id}Edit Project â€“ {project.name}{#else}New Project{/if}{/title}
  {#header}Project Overview{/header}
  {#content}

    <form action="/projects/save" method="post">
      {#if project.id}
        <input type="hidden" name="id" value="{project.id}">
      {/if}

      <div class="card mb-4">
        <div class="card-header">
          {#if project.id}Edit Project{#else}Create New Project{/if}
        </div>
        <div class="card-body">

          <!-- Project Name -->
          <div class="mb-3">
            <label for="name" class="form-label">Project Name</label>
            <input
                    type="text"
                    class="form-control"
                    id="name"
                    name="name"
                    value="{project.name ?: ''}"
                    required
            />
          </div>

          <!-- Customer Select -->
          <div class="mb-3">
            <label for="customerId" class="form-label">Customer</label>
            <select
                    id="customerId"
                    name="customerId"
                    class="form-select"
                    required
            >
              <option value="" disabled {#if project.customerId == null}selected{/if}>
                -- Select customer --
              </option>
              {#for cust in customers}
                <option
                        value="{cust.id}"
                        {#if cust.id == project.customerId}selected{/if}
                >
                  {#if cust.companyName}{cust.companyName}{#else}{cust.firstName} {cust.lastName}{/if}
                </option>
              {/for}
            </select>
          </div>

          <!-- Budget -->
          <div class="mb-3">
            <label for="budget" class="form-label">Budget (CHF)</label>
            <div class="input-group">
              <span class="input-group-text">CHF</span>
              <input
                      type="number"
                      class="form-control"
                      id="budget"
                      name="budget"
                      value="{project.budget}"
                      min="0"
                      required
              />
            </div>
          </div>

          <!-- Contact -->
          <div class="mb-3">
            <label for="contact" class="form-label">Contact</label>
            <input
                    type="text"
                    class="form-control"
                    id="contact"
                    name="contact"
                    value="{project.contact ?: ''}"
            />
          </div>

          <!-- Status -->
          <div class="mb-3">
            <label for="status" class="form-label">Status</label>
            <select id="status" name="status" class="form-select">
              <option value="PLANNED"     {#if project.status.name == 'PLANNED'}selected{/if}>Planned</option>
              <option value="IN_PROGRESS" {#if project.status.name == 'IN_PROGRESS'}selected{/if}>In Progress</option>
              <option value="COMPLETED"   {#if project.status.name == 'COMPLETED'}selected{/if}>Completed</option>
              <option value="CANCELLED"   {#if project.status.name == 'CANCELLED'}selected{/if}>Cancelled</option>
            </select>
          </div>

          <!-- Actions -->
          <div class="d-flex gap-2 mt-4">
            <button type="submit" class="btn btn-primary">
              <i class="bi bi-save me-1"></i>
              {#if project.id}Update Project{#else}Create Project{/if}
            </button>
            <a href="/projects" class="btn btn-outline-secondary">Cancel</a>
          </div>

        </div>
      </div>
    </form>

  {/content}
{/include}

{#include layout}
  {#title}Urlaub & Abwesenheiten – Baunex{/title}
  {#header}Urlaub & Abwesenheiten{/header}
  {#content}
    <link rel="stylesheet" href="/css/time-tracking-absences.css">
    
    <div id="absences-app"
         data-holidays='{holidaysJson}'
         data-employees='{employeesJson}'
         data-pending-holidays='{pendingHolidaysJson}'
         data-approved-holidays='{approvedHolidaysJson}'
         data-rejected-holidays='{rejectedHolidaysJson}'
         data-employee-stats='{employeeStatsJson}'
         data-public-holidays='{publicHolidaysJson}'
         data-current-year='{currentYear}'>
    </div>

    <!-- Abwesenheit Modal -->
    <div class="modal fade" id="absenceModal" tabindex="-1" aria-labelledby="absenceModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="absenceModalLabel">Neue Abwesenheit erfassen</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="absenceForm">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="absence-employee" class="form-label">Mitarbeiter</label>
                    <select id="absence-employee" name="employee" class="form-select" required>
                      <option value="">-- Bitte wählen --</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="absence-type" class="form-label">Abwesenheitstyp</label>
                    <select id="absence-type" name="type" class="form-select" required>
                      <option value="">-- Bitte wählen --</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="absence-start-date" class="form-label">Startdatum</label>
                    <input id="absence-start-date" name="startDate" type="date" class="form-control" required>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="absence-end-date" class="form-label">Enddatum</label>
                    <input id="absence-end-date" name="endDate" type="date" class="form-control" required>
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label for="absence-reason" class="form-label">Grund (optional)</label>
                <textarea id="absence-reason" name="reason" class="form-control" rows="3" placeholder="Grund für die Abwesenheit..."></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
            <button type="button" class="btn btn-primary" id="save-absence-btn">
              <i class="bi bi-check"></i> Abwesenheit speichern
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="/js/time-tracking-absences.js?v=7"></script>
  {/content}
{/include} 